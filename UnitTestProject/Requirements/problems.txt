ПРОВЕРИТЬ НАЛИЧИЕ РЕШЕНИЙ В ТРЕБОВАНИЯХ СООТВЕТСТВУЮЩЕГО КЛАССА

## Проблема:
- Комната не может обратиться к зданию напрямую для проверки максимального этажа
есть вариант создавать комнату, а затем присваивать ее id к нужному зданию
но тогда в репозитории появятся "висячие комнаты", у которых не назначено здание
логика предметной области утечет в сервисы (классы-пользователи room и building)
## Решение (компромис):
- Логика проверки этажа будет вызвана извне при добавлении в здание.
"Висячие комнаты" не будут добавляться в репозиторий,
пока не подтвердится, что она добавлена в здание

## Проблема:
как назначить комнате ID для записи его в здание до добавления комнаты в репозиторий?
## Решение:
в методе создания комнаты нужно получить следующий свободный id для комнаты,
id здания для которого создается комната, создать комнату с этим id,
записать этот id в список комнат в здании, сохранить комнату,
проверить результат сохранения, сохранить здание, проверить результат сохранения

## Проблема:
комната должна хранить ссылку/id пункта договора или сам договор?
должна ли комната вообще знать что она часть договора?
ну надо же как то определить, занята комната или нет, можно ли ее включать в другой договор
## Решение:
комната хранит id договора, который содержит комнату в качестве пункта договора
если активного договора нет (истек), активный договор должен занулиться

## Проблема:
как будут обнвляться договора с течением времени
## Решение:
нужен триггер, по которому будут обновляться статусы всех договоров и пунктов договоров,
активные договора в комнатах, значит нужен способ обновить id договора в комнате, зная договор
договор -> пункт договора -> комната
